<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wedding of Elaine & Filipe</title>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="globals.css">
  <link rel="stylesheet" href="style.css">
  <style>
    :root {
      --dark-main: #3B2752;
      --light-main: #FBF2E2;
      --accent: #C2185B;
    }
    html, body {
      background: var(--light-main);
      color: var(--dark-main);
      font-family: 'Segoe UI', Arial, sans-serif;
      margin: 0;
      padding: 0;
      height: 100%;
      overflow-y: scroll;
      scroll-behavior: smooth;
      scroll-snap-type: y proximity;
    }

    html {
      scroll-padding: 10px 0;
    }

    section {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 3rem 2rem;
      position: relative;
      min-height: 100vh;
      scroll-snap-align: center;
      scroll-snap-stop: normal;
    }

    /* Add CSS scroll snap points for gentle pull */
    @media (prefers-reduced-motion: no-preference) {
      html {
        scroll-snap-type: y proximity;
      }
    }

    /* Smooth scroll timing */
    * {
      scroll-behavior: smooth;
    }

    @supports (scroll-timeline: --section-scroll) {
      html {
        scroll-timeline: --section-scroll;
        animation-timeline: --section-scroll;
      }
    }

    /* Individual section styling */
    #title-section {
      height: 100vh;
      overflow: hidden;
    }

    #our-story {
      min-height: 100vh;
      height: auto;
    }

    #donations {
      height: 100vh;
    }

    #venue-info {
      min-height: 100vh;
      height: auto;
    }

    #dress-code {
      min-height: 100vh;
      height: auto;
    }
    .section-title {
      font-family: 'Dancing Script', cursive;
      color: var(--accent);
      font-size: 3.5rem;
      margin-bottom: 1.5rem;
      letter-spacing: 1px;
      text-align: center;
      animation: scaleIn 1s ease-out;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
      opacity: 1 !important;
    }

    /* Ensure all text has full opacity */
    h1, h2, h3, h4, h5, h6, p, span, div {
      opacity: 1;
    }
    h2, h3 {
      font-family: 'Dancing Script', cursive;
      color: var(--accent);
      margin-top: 0.5em;
      margin-bottom: 0.5em;
    }
    p, span, li, label {
      color: var(--dark-main);
      font-size: 1.12rem;
      font-family: 'Segoe UI', Arial, sans-serif;
      line-height: 1.7;
      margin-bottom: 0.6em;
    }
    /* Keyframe Animations */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    @keyframes scaleIn {
      from {
        opacity: 0;
        transform: scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    @keyframes fadeInNames {
      0% {
        opacity: 0;
        transform: translateY(-30px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes slideNames {
      0% {
        opacity: 0;
        letter-spacing: 20px;
      }
      100% {
        opacity: 1;
        letter-spacing: 5px;
      }
    }

    .couple-names {
      font-family: 'Dancing Script', cursive;
      font-size: 5rem;
      color: var(--accent);
      text-align: center;
      margin-bottom: 2rem;
      animation: fadeInNames 1.5s ease-out;
      text-shadow: 3px 3px 6px rgba(0,0,0,0.15);
      font-weight: 700;
    }

    .couple-names .name-separator {
      font-size: 3.5rem;
      margin: 0 1rem;
      animation: scaleIn 1.2s ease-out 0.3s both;
    }

    /* Carousel center image hover effect - smooth and gradual */
    #carousel-container {
      transition: gap 0.6s ease;
    }

    .carousel-center {
      transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) !important;
    }

    .carousel-center:hover {
      height: 90vh !important;
      width: auto !important;
      transform: scale(1.02);
      box-shadow: 0 25px 70px rgba(0,0,0,0.6) !important;
      z-index: 10 !important;
    }

    /* Smooth side image movement when center is hovered */
    #carousel-container:has(.carousel-center:hover) #left-img,
    #carousel-container:has(.carousel-center:hover) #right-img {
      transform: translateX(0);
      transition: all 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    @keyframes typewriter {
      from {
        width: 0;
      }
      to {
        width: 100%;
      }
    }

    @keyframes fadeInLetter {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Fullscreen Carousel Modal */
    #carousel-fullscreen-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      backdrop-filter: blur(20px);
      z-index: 9999;
      justify-content: center;
      align-items: center;
      animation: fadeIn 0.3s ease-out;
    }

    #carousel-fullscreen-modal.active {
      display: flex;
    }

    #fullscreen-carousel-img {
      max-width: 90vw;
      max-height: 90vh;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.8);
      animation: scaleIn 0.4s ease-out;
    }

    #close-fullscreen {
      position: absolute;
      top: 30px;
      right: 30px;
      background: rgba(255,255,255,0.9);
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 2rem;
      cursor: pointer;
      color: var(--dark-main);
      transition: all 0.3s ease;
      z-index: 10000;
    }

    #close-fullscreen:hover {
      background: white;
      transform: rotate(90deg);
    }

    /* Audio Permission Bubble */
    #audio-permission {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: rgba(255,255,255,0.98);
      padding: 1.5rem 2rem;
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(59,39,82,0.3);
      z-index: 10000;
      display: none;
      animation: slideInUp 0.5s ease-out;
      border: 2px solid var(--accent);
    }

    #audio-permission.active {
      display: block;
    }

    @keyframes slideInUp {
      from {
        transform: translateY(100px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    #audio-permission h3 {
      margin: 0 0 1rem 0;
      color: var(--accent);
      font-size: 1.4rem;
    }

    #audio-permission p {
      margin: 0 0 1.2rem 0;
      color: var(--dark-main);
      font-size: 1.1rem;
    }

    .audio-controls {
      display: flex;
      gap: 1rem;
    }

    .audio-btn {
      padding: 0.7rem 1.5rem;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .audio-btn.allow {
      background: var(--accent);
      color: white;
    }

    .audio-btn.allow:hover {
      background: #99204a;
      transform: translateY(-2px);
    }

    .audio-btn.mute {
      background: #e0e0e0;
      color: var(--dark-main);
    }

    .audio-btn.mute:hover {
      background: #d0d0d0;
    }

    .love-letter {
      position: relative;
      background-image: url('assets/images/Paper.jpg');
      background-size: cover;
      background-position: center;
      border-radius: 10px;
      padding: 4rem 5rem 4rem 8rem;
      max-width: 1400px;
      width: 92%;
      margin: 2rem auto;
      box-shadow: 0 8px 32px rgba(0,0,0,0.2);
      position: relative;
      animation: fadeInUp 1s ease-out;
    }

    .love-letter::before {
      content: '';
      position: absolute;
      top: 0;
      left: 100px;
      width: 3px;
      height: 100%;
      background: rgba(194,24,91,0.2);
    }

    .love-letter p {
      font-family: 'Dancing Script', cursive;
      font-size: 2.3rem;
      line-height: 3.2rem;
      color: #0d0a08;
      margin: 0 0 2.5rem 0;
      padding-left: 0;
      text-align: left;
      position: relative;
      animation: fadeInLetter 1.5s ease-out;
      text-shadow: 0.5px 0.5px 0.5px rgba(0,0,0,0.1);
      font-weight: 500;
    }

    .love-letter-signature {
      font-family: 'Dancing Script', cursive;
      font-size: 2.8rem;
      text-align: right;
      margin-top: 4rem;
      color: var(--accent);
      font-weight: 700;
      text-shadow: 0.5px 0.5px 1px rgba(0,0,0,0.2);
    }

    /* Unified Card Styles - Larger and More Beautiful */
    .card, .donation-board, .invitation-card, .text-card, .countdown-card {
      background: rgba(255,255,255,0.94);
      backdrop-filter: blur(8px);
      border-radius: 1.5rem;
      box-shadow: 0 6px 24px rgba(59,39,82,0.12);
      border: 2px solid #f7e6ee;
      padding: 2.2rem 2rem;
      margin: 1.5rem 0;
      max-width: 800px;
      width: 90%;
      color: var(--dark-main);
      font-size: 1.15rem;
      font-family: 'Segoe UI', Arial, sans-serif;
      animation: fadeInUp 0.8s ease-out;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .card:hover, .donation-board:hover, .invitation-card:hover, .text-card:hover {
      transform: translateY(-5px) scale(1.01);
      box-shadow: 0 12px 40px rgba(59,39,82,0.22);
    }

    .card, .donation-board, .invitation-card, .text-card {
      will-change: transform, box-shadow;
    }
    .countdown-card {
      text-align: center;
      font-size: 2.5rem;
      font-weight: 600;
      color: var(--accent);
      padding: 2rem 2.5rem;
      letter-spacing: 0.1px;
      border-radius: 1.6rem;
      box-shadow: 0 8px 28px rgba(59,39,82,0.18);
      border: 2px solid #f7e6ee;
      margin-bottom: 2.5rem;
      max-width: 900px;
      animation: scaleIn 1.2s ease-out;
      transition: transform 0.3s ease;
    }
    .countdown-card:hover {
      transform: scale(1.02);
    }
    .countdown-card .countdown-value {
      color: var(--accent);
      font-size: 3rem;
      font-weight: 700;
      margin: 0 0.3em;
    }
    .countdown-card .countdown-label {
      color: var(--dark-main);
      font-size: 1.3rem;
      font-weight: 600;
      margin: 0 0.25em;
    }
    /* Donations section new flex and board */
    .donations-flexrow {
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      gap: 2.5rem;
      width: 100%;
      justify-content: center;
    }
    .donations-stack {
      display: flex;
      flex-direction: column;
      gap: 1.4rem;
    }
    #donations .donation-board {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-width: 360px;
      max-width: 450px;
      width: 100%;
      background: rgba(255,255,255,0.95);
      border-radius: 1.5rem;
      box-shadow: 0 6px 24px rgba(59,39,82,0.12);
      border: 2px solid #f7e6ee;
      padding: 2.8rem 2rem 2rem 2rem;
      margin: 1rem 0;
      box-sizing: border-box;
      animation: fadeInUp 1s ease-out;
    }
    #donations .donation-board img.icon {
      width: 110px;
      height: 110px;
      margin-bottom: 1.5rem;
      transition: transform 0.3s ease;
    }
    #donations .donation-board:hover img.icon {
      transform: scale(1.1) rotate(5deg);
    }
    #donations .donation-board .donation-title {
      font-size: 1.35rem;
      color: var(--accent);
      font-weight: 600;
      margin-bottom: 0.7em;
      text-align: center;
    }
    #donations .donation-board .donation-btn {
      width: 90%;
      max-width: 220px;
      margin-top: 1em;
      text-align: center;
      font-size: 1.1rem;
      padding: 0.5em 1.5em;
    }
    #donations .donation-board.qr {
      padding: 2.8rem 2rem 2.5rem 2rem;
    }
    #donations .donation-board.qr img.qr {
      width: 300px;
      height: 310px;
      margin: 1.5rem 0 0 0;
      border-radius: 1.2rem;
      border: 3px solid #f7e6ee;
      background: #fff;
      transition: transform 0.3s ease;
    }
    #donations .donation-board.qr:hover img.qr {
      transform: scale(1.05);
    }
    #donations .donation-board.qr .donation-title {
      color: var(--accent);
      font-size: 1.25rem;
      font-weight: 500;
      margin-bottom: 0.3rem;
    }
    .donation-qr-with-margin {
      /* Default no extra margin on desktop */
      margin-bottom: 0;
    }
    /* Comprehensive Mobile Responsiveness */
    @media (max-width: 900px) {
      .section-title {
        font-size: 2.8rem;
      }
      .couple-names {
        font-size: 3.5rem;
      }
      .couple-names .name-separator {
        font-size: 2.5rem;
      }
      .donations-flexrow {
        flex-direction: column;
        align-items: center;
        gap: 1.5rem;
      }
      .donation-qr-with-margin {
        margin-bottom: 2.2rem;
      }
      #donations .donation-board {
        width: 90vw !important;
        max-width: 500px !important;
        min-width: unset !important;
      }
      .card, .donation-board, .invitation-card, .text-card, .countdown-card {
        width: 90vw;
        max-width: 500px;
        padding: 1.8rem 1.5rem;
      }
      .countdown-card {
        font-size: 1.8rem;
        padding: 1.5rem 1.2rem;
      }
      .countdown-card .countdown-value {
        font-size: 2.2rem;
      }
      .countdown-card .countdown-label {
        font-size: 1.1rem;
      }
      .horizontal-flex {
        flex-direction: column !important;
        align-items: center !important;
      }
    }

    @media (max-width: 768px) {
      .section-title {
        font-size: 2.5rem;
      }
      .couple-names {
        font-size: 3rem;
      }
      .couple-names .name-separator {
        font-size: 2.2rem;
      }
      /* Carousel adjustments for mobile - larger size */
      div[style*="width: 900px"] {
        width: 95vw !important;
        max-width: 550px !important;
        padding: 30px !important;
      }
      #carousel-container {
        height: 55vh !important;
        gap: 1rem !important;
      }
      #center-img {
        width: 320px !important;
        height: 500px !important;
      }
      #left-img, #right-img {
        width: 180px !important;
        height: 300px !important;
      }
      .love-letter {
        padding: 3rem 2rem 3rem 5rem !important;
        width: 85% !important;
        max-width: 600px !important;
      }
      .love-letter::before {
        left: 50px !important;
      }
      .love-letter p {
        font-size: 1.8rem !important;
        line-height: 2.6rem !important;
        margin-bottom: 2rem !important;
      }
      .love-letter-signature {
        font-size: 2.3rem !important;
        margin-top: 3rem !important;
      }
      #donations .donation-board img.icon {
        width: 90px;
        height: 90px;
      }
      #donations .donation-board.qr img.qr {
        width: 260px;
        height: 270px;
      }
    }

    @media (max-width: 480px) {
      .section-title {
        font-size: 2.2rem;
      }
      .couple-names {
        font-size: 2.5rem;
      }
      .couple-names .name-separator {
        font-size: 1.8rem;
        margin: 0 0.5rem;
      }
      .countdown-card {
        font-size: 1.5rem;
        flex-wrap: wrap;
      }
      .countdown-card .countdown-value {
        font-size: 1.9rem;
      }
      .countdown-card .countdown-label {
        font-size: 1rem;
      }
      #carousel-container {
        height: 50vh !important;
        gap: 0.8rem !important;
      }
      #center-img {
        width: 260px !important;
        height: 400px !important;
      }
      #left-img, #right-img {
        width: 140px !important;
        height: 230px !important;
      }
      .love-letter {
        padding: 2.5rem 1.5rem 2.5rem 4rem !important;
        width: 80% !important;
      }
      .love-letter::before {
        left: 50px !important;
        width: 2px !important;
      }
      .love-letter p {
        font-size: 1.7rem !important;
        line-height: 2.4rem !important;
        margin-bottom: 1.8rem !important;
      }
      .love-letter-signature {
        font-size: 2.1rem !important;
        margin-top: 2.5rem !important;
      }
      #donations .donation-board.qr img.qr {
        width: 220px;
        height: 230px;
      }
    }
    /* Section backgrounds */
    .background-layer {
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
      background-size: cover;
      background-position: center;
      filter: blur(var(--section-blur, 5px))
              hue-rotate(var(--section-hue, 0deg))
              brightness(var(--section-brightness, 100%))
              saturate(var(--section-saturate, 100%))
              contrast(var(--section-contrast, 100%));
      z-index: 0;
      opacity: 1 !important;
    }
    section > *:not(.background-layer) {
      position: relative;
      z-index: 1;
      opacity: 1 !important;
    }
    .section-fade::after {
      content: "";
      position: absolute;
      bottom: 0; left: 0; width: 100%; height: 120px;
      background: linear-gradient(to bottom, rgba(251,242,226,0) 0%, rgba(251,242,226,1) 100%);
      pointer-events: none;
      z-index: 2;
    }
    /* Buttons & Links */
    a, .btn {
      color: var(--light-main) !important;
      background: var(--accent);
      padding: 0.5em 1.5em;
      border-radius: 999px;
      text-decoration: none;
      font-weight: 600;
      display: inline-block;
      margin-top: 0.5em;
      font-size: 1.1rem;
      transition: all 0.3s ease;
      border: none;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(194, 24, 91, 0.3);
    }
    a:hover, .btn:hover {
      background: #99204a;
      color: var(--light-main) !important;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(194, 24, 91, 0.4);
    }
    a:active, .btn:active {
      transform: translateY(0);
    }
    /* Scrollbar */
    ::-webkit-scrollbar { width: 10px; background: #f1e6f5; }
    ::-webkit-scrollbar-thumb { background: #c5a5c9; border-radius: 8px; }
  </style>
</head>
<body>

<!-- Fullscreen Carousel Modal -->
<div id="carousel-fullscreen-modal">
  <button id="close-fullscreen">×</button>
  <img id="fullscreen-carousel-img" src="" alt="Fullscreen Image">
</div>

<!-- Audio Permission Bubble -->
<div id="audio-permission">
  <h3>🎵 Música de Fundo</h3>
  <p>Gostaria de ouvir música enquanto navega?</p>
  <div class="audio-controls">
    <button class="audio-btn allow" onclick="allowAudio()">Sim, por favor!</button>
    <button class="audio-btn mute" onclick="muteAudio()">Não, obrigado</button>
  </div>
</div>

<!-- NEW: Title Section with Static Image -->
<section id="title-section" class="section-fade">
  <div class="background-layer" style="background-image: url('assets/images/Section2.png');"></div>
  <h1 class="couple-names" style="animation: fadeInNames 2s ease-out forwards;">Elaine <span class="name-separator">&</span> Filipe</h1>
  <div style="margin-top: 3rem; max-width: 800px; width: 90%;">
    <img src="assets/images/Title1.jpg" alt="Elaine & Filipe" style="width: 100%; height: auto; max-height: 70vh; object-fit: cover; border-radius: 20px; box-shadow: 0 20px 50px rgba(0,0,0,0.3); animation: scaleIn 1.5s ease-out 0.5s both;">
  </div>
</section>

<!-- Carousel Section (moved from first section) -->
<section id="our-story" class="section-fade">
  <div class="background-layer" style="background-image: url('assets/images/Section2.png');"></div>
  <h1 class="section-title">Nossa História</h1>
  <div id="carousel-container" style="position: relative; width: 100%; max-width: 1200px; height: 70vh; display: flex; justify-content: center; align-items: center; gap: 2rem; transition: all 0.6s ease; margin-bottom: 2rem;">
    <img id="left-img" style="width: 280px; height: 450px; object-fit: cover; object-position: center 20%; filter: blur(3px) brightness(75%); border-radius: 15px; transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94); box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
    <img id="center-img" class="carousel-center" style="width: 400px; height: 600px; object-fit: cover; object-position: center 20%; border-radius: 20px; cursor: pointer; box-shadow: 0 20px 50px rgba(0,0,0,0.4); z-index: 2;" onclick="openFullscreen()">
    <img id="right-img" style="width: 280px; height: 450px; object-fit: cover; object-position: center 20%; filter: blur(3px) brightness(75%); border-radius: 15px; transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94); box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
  </div>
  <button onclick="toggleLoveLetter()" class="btn" style="font-size: 1.2rem; padding: 0.8rem 2rem; margin-top: 1rem;">📖 Leia Nossa História de Amor</button>
  <div id="love-letter-content" class="love-letter" style="display: none; margin-top: 2rem; max-height: 0; opacity: 0; transition: all 0.6s ease;">
    <p>Nos conhecemos na faculdade, o destino e os rolês universitários nos apresentaram, mas foi só quatro anos depois, que as coisas realmente começaram.</p>
    <p>Nosso primeiro encontro? Cerveja quente num quiosque velho perto de uma praia. Pode não parecer o mais romântico dos cenários, mas hoje a gente morre de rir ao lembrar porque foi ali que começou tudo.</p>
    <p>Desde então, vivemos um relacionamento cheio de parceria e amor. A gente é grudento mesmo e adora assistir filmes juntos, rir das nossas piadas internas (e das que ninguém mais entende) e aproveitar um barzinho sempre que dá. O amor aqui é feito de cumplicidade, apoio e muitas risadas.</p>
    <p>Depois de 6 anos juntos, veio o pedido: no meio de um show da Mariah Carey! Uma grande surpresa que tornou um momento especial em um dos mais marcantes da nossa história. Mal podemos esperar pra viver o próximo capítulo, de mãos dadas. Agora, chegou a hora de celebrar tudo isso com quem a gente ama. E é por isso que você está aqui, pra celebrar com a gente!</p>
    <div class="love-letter-signature">Com amor, Elaine & Filipe ❤️</div>
  </div>
</section>


<section id="donations" class="section-fade">
  <div class="background-layer" style="background-image: url('assets/images/TitleSection.png');"></div>
  <h1 class="section-title" style="margin-bottom: 1.5rem;">Faça parte com sua ajuda ❤️</h1>
  <div class="donations-flexrow">
    <div class="donations-stack">
      <!-- GIFT CARD -->
      <div class="donation-board">
        <img class="icon" src="assets/images/iconGifts.png" alt="Lista de Presentes">
        <a class="donation-btn" href="https://www.amazon.com.br/hz/wishlist/ls/1CWJZ7I2NHRFU?ref_=wl_share" target="_blank">Ver Lista de Presentes</a>
      </div>
      <!-- HONEYMOON CARD -->
      <div class="donation-board">
        <img class="icon" src="assets/images/iconResort.png" alt="Lua de Mel">
        <a class="donation-btn" href="https://www.agenciammtour.com.br/lua-de-mel-cotas/cota/nome/eliane-filipe" target="_blank">Presentear Lua de Mel</a>
      </div>
    </div>
    <!-- QR CODE CARD -->
    <div class="donation-board qr donation-qr-with-margin">
      <img class="icon" src="assets/images/iconMoney.png" alt="Doação">
      <span class="donation-title">PIX para sua contribuição direta.</span>
      <span class="donation-title" style="font-family:'Dancing Script',cursive;" >(Abra no aplicativo do seu banco)</span>
      <img class="qr" src="assets/images/QRCode.png" alt="Donation QR Code">
    </div>
  </div>
</section>

<section id="venue-info" class="section-fade">
  <div class="background-layer" style="background-image: url('assets/images/Maison.jpg'); filter: blur(2px);"></div>
  <h1 class="section-title">Cerimônia e Recepção</h1>
  <div class="countdown-card">
    <span class="countdown-label">Faltam</span>
    <span id="days" class="countdown-value">0</span><span class="countdown-label">Dias e</span>
    <span id="hours" class="countdown-value">0</span><span class="countdown-label">Horas</span>
    <a href="https://forms.gle/RSVPFormExample" target="_blank" style="margin-left:1.5em;">Confirme sua presença AQUI</a>
  </div>
  <div style="display: flex; flex-direction: column; align-items: center; gap: 2rem; width: 90%; max-width: 900px;">
    <!-- Venue Card with Button -->
    <div class="donation-board" style="min-width: 300px;">
      <img class="icon" src="assets/images/iconVenue.png" alt="Local da Cerimônia" style="width: 100px; height: 100px; margin-bottom: 1.2rem;">
      <h2 style="margin: 0.5rem 0; font-size: 2rem; color: var(--accent); font-family: 'Dancing Script', cursive;">Local da Cerimônia</h2>
      <h3 style="margin: 0.5rem 0 1.5rem 0; font-size: 1.6rem; color: var(--accent); font-family: 'Dancing Script', cursive;">Maison Garden</h3>
      <a class="donation-btn" href="https://www.google.com/maps?q=Praça+Inácio+do+Canto,+9,+Madureira,+Rio+de+Janeiro" target="_blank">Ver no Google Maps</a>
    </div>

    <!-- Event Details Card -->
    <div style="background: rgba(255,255,255,0.92); padding: 2rem 2.5rem; border-radius: 20px; text-align: left; box-shadow: 0 8px 24px rgba(0,0,0,0.15); max-width: 600px; width: 100%;">
      <p style="margin:0.8rem 0; font-size:1.3rem; color: var(--dark-main);"><b>📅 Data:</b> 27 de Dezembro de 2025</p>
      <p style="margin:0.8rem 0; font-size:1.3rem; color: var(--dark-main);"><b>📍 Localização:</b> Praça Inácio do Canto, nº 9, Madureira, Rio de Janeiro</p>
      <p style="margin:0.8rem 0; font-size:1.3rem; color: var(--dark-main);"><b>🕓 Horário:</b> 16:00h <span style="color: var(--accent); font-weight: 600;">(Por favor chegar antes ❤️)</span></p>
    </div>
  </div>
</section>

<section id="dress-code" class="section-fade">
  <div class="background-layer" style="background-image: url('assets/images/Pose4.jpg');"></div>
  <h1 class="section-title">Dress Code</h1>
  <div style="margin-top: 2rem; padding: 3rem; background: rgba(255,255,255,0.88); border-radius: 25px; max-width: 1100px; width: 90%; box-shadow: 0 8px 32px rgba(0,0,0,0.15);">
    <h2 style="margin-top:0; margin-bottom:1.5rem; font-size:2.5rem; color: var(--accent);">👔 Esporte Fino</h2>
    <p style="font-size:1.3rem; margin-bottom: 2.5rem; color: var(--dark-main);">Vista-se com elegância! Aqui estão algumas inspirações para os cavalheiros:</p>

    <!-- Men's Examples -->
    <div style="display: flex; gap: 2.5rem; justify-content: center; flex-wrap: wrap; margin-bottom: 3rem;">
      <div style="flex: 1; min-width: 300px; max-width: 400px;">
        <img src="assets/images/esporte-fino1.jpg" alt="Esporte Fino - Exemplo 1" style="width: 100%; height: 600px; object-fit: cover; border-radius: 20px; box-shadow: 0 8px 24px rgba(0,0,0,0.2); transition: transform 0.3s ease;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
      </div>
      <div style="flex: 1; min-width: 300px; max-width: 400px;">
        <img src="assets/images/esporte-fino2.jpg" alt="Esporte Fino - Exemplo 2" style="width: 100%; height: 600px; object-fit: cover; border-radius: 20px; box-shadow: 0 8px 24px rgba(0,0,0,0.2); transition: transform 0.3s ease;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
      </div>
    </div>

    <!-- Ladies Placeholder -->
    <div style="margin-top: 3.5rem; padding: 2.5rem; background: linear-gradient(135deg, rgba(194,24,91,0.08) 0%, rgba(59,39,82,0.08) 100%); border-radius: 20px; border: 3px dashed rgba(194,24,91,0.3);">
      <h3 style="font-size: 2rem; color: var(--accent); margin-bottom: 1.2rem;">👗 Inspirações para as Damas</h3>
      <p style="font-size: 1.2rem; color: var(--dark-main); font-style: italic;">Em breve, mais exemplos de looks elegantes!</p>
    </div>
  </div>
</section>

<!-- Background Music -->
<audio id="story-audio" src="assets/audio/A_Thousand_Years.mp3" preload="auto" loop></audio>
<audio id="donation-audio" src="assets/audio/Marry_Me_Bella.mp3" preload="auto" loop></audio>
<audio id="invites-audio" src="assets/audio/Turning_Page.mp3" preload="auto" loop></audio>

<script>
  // Improved Carousel with Smoother Transitions
  const images = ["Pose5.jpg", "Pose1.jpg", "Pose3.jpg", "Pose7.jpg","Pose6.jpg","Pose2.jpg"];
  let index = 0;
  let autoPlayInterval = null;
  let isTransitioning = false;

  function updateCarousel() {
    if (isTransitioning) return;
    isTransitioning = true;

    const left = document.getElementById("left-img");
    const center = document.getElementById("center-img");
    const right = document.getElementById("right-img");

    // Smooth fade and scale transition
    center.style.transition = "opacity 0.4s ease, transform 0.4s ease";
    center.style.opacity = "0";
    center.style.transform = "scale(0.92)";

    setTimeout(() => {
      // Update image sources
      left.src = "assets/images/" + images[(index - 1 + images.length) % images.length];
      center.src = "assets/images/" + images[index];
      right.src = "assets/images/" + images[(index + 1) % images.length];

      // Fade back in with smooth transition
      setTimeout(() => {
        center.style.opacity = "1";
        center.style.transform = "scale(1)";

        setTimeout(() => {
          isTransitioning = false;
        }, 400);
      }, 50);
    }, 400);
  }

  // Auto-advance only - no manual controls
  function nextImage() {
    if (!isTransitioning) {
      index = (index + 1) % images.length;
      updateCarousel();
    }
  }

  function startAutoPlay() { autoPlayInterval = setInterval(nextImage, 5000); }
  function stopAutoPlay() { clearInterval(autoPlayInterval); }

  // Toggle Love Letter
  function toggleLoveLetter() {
    const letterContent = document.getElementById('love-letter-content');
    const button = event.target;

    if (letterContent.style.display === 'none' || letterContent.style.display === '') {
      // Show letter
      letterContent.style.display = 'block';
      setTimeout(() => {
        letterContent.style.maxHeight = '2000px';
        letterContent.style.opacity = '1';
      }, 10);
      button.textContent = '📖 Fechar História';
    } else {
      // Hide letter
      letterContent.style.maxHeight = '0';
      letterContent.style.opacity = '0';
      setTimeout(() => {
        letterContent.style.display = 'none';
      }, 600);
      button.textContent = '📖 Leia Nossa História de Amor';
    }
  }

  // Fullscreen Carousel Functions
  function openFullscreen() {
    const modal = document.getElementById('carousel-fullscreen-modal');
    const fullscreenImg = document.getElementById('fullscreen-carousel-img');
    const centerImg = document.getElementById('center-img');

    fullscreenImg.src = centerImg.src;
    modal.classList.add('active');
    document.body.style.overflow = 'hidden';
  }

  function closeFullscreen() {
    const modal = document.getElementById('carousel-fullscreen-modal');
    modal.classList.remove('active');
    document.body.style.overflow = '';
  }

  // Close on click outside or escape key
  document.getElementById('carousel-fullscreen-modal').addEventListener('click', function(e) {
    if (e.target === this) closeFullscreen();
  });

  document.getElementById('close-fullscreen').addEventListener('click', closeFullscreen);

  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') closeFullscreen();
  });

  // Audio Permission Functions
  let audioMuted = false;
  let audioPermissionGiven = false;

  function showAudioPermission() {
    const bubble = document.getElementById('audio-permission');
    bubble.classList.add('active');
  }

  function hideAudioPermission() {
    const bubble = document.getElementById('audio-permission');
    bubble.classList.remove('active');
  }

  function allowAudio() {
    audioPermissionGiven = true;
    audioMuted = false;
    hideAudioPermission();
    enableAudio();
  }

  function muteAudio() {
    audioPermissionGiven = true;
    audioMuted = true;
    hideAudioPermission();
    // Stop all audio
    Object.values(audios).forEach(audio => {
      audio.pause();
      audio.volume = 0;
    });
  }

  // Robust Audio Management - Updated for 6 sections
  const audioSeekTimes = {
    "title-section": 0,
    "our-story": 20,
    "donations": 60,
    "venue-info": 33,
    "dress-code": 50
  };
  const audios = {
    "title-section": document.getElementById('story-audio'),
    "our-story": document.getElementById('story-audio'),
    "donations": document.getElementById('donation-audio'),
    "venue-info": document.getElementById('invites-audio'),
    "dress-code": document.getElementById('invites-audio')
  };
  let currentPlayingSection = null;
  let debounceTimeout = null;
  let userInteracted = false;
  let fadeIntervals = {};
  const sections = document.querySelectorAll("section");

  // Clear any existing fade interval
  function clearFadeInterval(sectionId) {
    if (fadeIntervals[sectionId]) {
      clearInterval(fadeIntervals[sectionId]);
      delete fadeIntervals[sectionId];
    }
  }

  // Improved fade functions with cleanup
  function fadeOut(audio, sectionId, duration = 700) {
    if (!audio) return;
    clearFadeInterval(sectionId);

    const startVolume = audio.volume;
    const step = startVolume / (duration / 50);

    fadeIntervals[sectionId] = setInterval(() => {
      if (audio.volume > step) {
        audio.volume = Math.max(0, audio.volume - step);
      } else {
        audio.volume = 0;
        audio.pause();
        clearFadeInterval(sectionId);
      }
    }, 50);
  }

  function fadeIn(audio, sectionId, duration = 700, seekTime = null) {
    if (!audio) return;
    clearFadeInterval(sectionId);

    audio.volume = 0;

    // Set seek time before playing
    if (seekTime !== null && !isNaN(seekTime)) {
      try {
        if (audio.readyState >= 2) {
          audio.currentTime = seekTime;
        }
      } catch (e) {
        console.log('Seek not ready yet');
      }
    }

    const playPromise = audio.play();

    if (playPromise !== undefined) {
      playPromise.then(() => {
        // Double check we're still on this section
        if (currentPlayingSection !== sectionId) {
          audio.pause();
          return;
        }

        const step = 1 / (duration / 50);
        fadeIntervals[sectionId] = setInterval(() => {
          if (audio.volume < 1 - step) {
            audio.volume = Math.min(1, audio.volume + step);
          } else {
            audio.volume = 1;
            clearFadeInterval(sectionId);
          }
        }, 50);
      }).catch((error) => {
        console.log('Playback prevented:', error);
      });
    }
  }

  function getActiveSection() {
    let activeSection = null;
    let maxVisibility = 0;

    sections.forEach(section => {
      const rect = section.getBoundingClientRect();
      const viewportHeight = window.innerHeight;

      // Calculate how much of the section is visible
      const visibleTop = Math.max(0, rect.top);
      const visibleBottom = Math.min(viewportHeight, rect.bottom);
      const visibleHeight = Math.max(0, visibleBottom - visibleTop);

      if (visibleHeight > maxVisibility) {
        maxVisibility = visibleHeight;
        activeSection = section.id;
      }
    });

    return activeSection;
  }

  function switchAudio(newSectionId) {
    if (!newSectionId || newSectionId === currentPlayingSection) return;

    // Get unique audios (since some sections share the same audio)
    const previousAudio = currentPlayingSection ? audios[currentPlayingSection] : null;
    const newAudio = audios[newSectionId];

    // If switching to same audio file, just update current section
    if (previousAudio === newAudio && previousAudio !== null) {
      currentPlayingSection = newSectionId;
      return;
    }

    // Pause all audios first to avoid conflicts
    Object.keys(audios).forEach(key => {
      if (audios[key] !== newAudio) {
        const audio = audios[key];
        if (audio && !audio.paused) {
          fadeOut(audio, key, 500);
        }
      }
    });

    // Fade in new audio after brief delay
    if (newAudio) {
      setTimeout(() => {
        // Ensure this audio is not already playing
        if (newAudio.paused || newAudio.volume === 0) {
          fadeIn(newAudio, newSectionId, 800, audioSeekTimes[newSectionId]);
        }
        currentPlayingSection = newSectionId;
      }, 400);
    }
  }

  // Scroll handler with debounce - improved for better section detection
  document.addEventListener("scroll", () => {
    if (audioMuted || !audioPermissionGiven) return;

    // Enable audio interaction on first scroll
    if (!userInteracted) {
      userInteracted = true;
    }

    if (debounceTimeout) clearTimeout(debounceTimeout);
    debounceTimeout = setTimeout(() => {
      const activeSection = getActiveSection();
      if (activeSection && activeSection !== currentPlayingSection) {
        console.log('Switching to section:', activeSection); // Debug log
        switchAudio(activeSection);
      }
    }, 200); // Faster response for audio switching
  }, { passive: true });

  // Enable audio on user interaction
  function enableAudio() {
    if (!userInteracted && !audioMuted && audioPermissionGiven) {
      userInteracted = true;
      const activeSection = getActiveSection();
      if (activeSection) {
        switchAudio(activeSection);
      }
    }
  }

  // Simple fade-in observer
  const sectionObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.style.opacity = '1';
      }
    });
  }, {
    threshold: 0.2
  });

  // Smooth scroll enhancement - ALWAYS center on nearest section with directional bias
  let scrollTimeout;
  let isScrolling = false;
  let lastScrollY = window.scrollY;
  let scrollDirection = 0; // 1 for down, -1 for up

  window.addEventListener('scroll', () => {
    // Detect scroll direction
    const currentScrollY = window.scrollY;
    if (currentScrollY > lastScrollY) {
      scrollDirection = 1; // scrolling down
    } else if (currentScrollY < lastScrollY) {
      scrollDirection = -1; // scrolling up
    }
    lastScrollY = currentScrollY;

    if (!isScrolling) {
      isScrolling = true;
    }

    clearTimeout(scrollTimeout);

    scrollTimeout = setTimeout(() => {
      isScrolling = false;

      // Always snap to nearest section center after scroll stops
      const scrollPosition = window.scrollY + window.innerHeight / 2;
      let closestSection = null;
      let closestDistance = Infinity;

      sections.forEach(section => {
        const rect = section.getBoundingClientRect();
        const sectionCenter = rect.top + window.scrollY + rect.height / 2;
        let distance = Math.abs(scrollPosition - sectionCenter);

        // Add slight bias in scroll direction to make it less sticky
        // If scrolling down and this section is below, reduce distance slightly
        // If scrolling up and this section is above, reduce distance slightly
        const sectionRelativePosition = sectionCenter - scrollPosition;
        if ((scrollDirection > 0 && sectionRelativePosition > 0) ||
            (scrollDirection < 0 && sectionRelativePosition < 0)) {
          distance *= 0.85; // 15% bias towards scroll direction
        }

        // Find closest section with directional bias
        if (distance < closestDistance) {
          closestDistance = distance;
          closestSection = section;
        }
      });

      // ALWAYS center if we found a section
      if (closestSection) {
        const rect = closestSection.getBoundingClientRect();
        const sectionCenter = rect.top + window.scrollY + rect.height / 2;
        const targetScroll = sectionCenter - window.innerHeight / 2;

        // Only scroll if we're not already very close
        if (Math.abs(window.scrollY - targetScroll) > 10) {
          window.scrollTo({
            top: targetScroll,
            behavior: 'smooth'
          });
        }
      }

      scrollDirection = 0; // Reset direction after centering
    }, 100); // Balanced trigger time
  }, { passive: true });

  window.onload = function() {
    updateCarousel();
    startAutoPlay();

    // Observe all sections for fade-in
    sections.forEach((section, index) => {
      sectionObserver.observe(section);
      // Initial state - only hide non-first sections
      if (index > 0) {
        section.style.opacity = '0';
        section.style.transition = 'opacity 0.5s ease';
      }
    });

    // Show audio permission bubble after 1 second
    setTimeout(showAudioPermission, 1000);
  };

  // Countdown
  const weddingDate = new Date("2025-12-27T16:00:00").getTime();
  function updateCountdown() {
    const now = new Date().getTime();
    const distance = weddingDate - now;
    if (distance <= 0) {
      document.querySelector(".countdown-card").innerHTML = "<b>It's wedding time!</b>";
      return;
    }
    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    document.getElementById("days").innerText = days;
    document.getElementById("hours").innerText = hours;
  }
  setInterval(updateCountdown, 1000);
  updateCountdown();
</script>
</body>
</html>
